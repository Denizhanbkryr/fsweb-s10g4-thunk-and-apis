{"ast":null,"code":"import { FAV_ADD, FAV_REMOVE, FETCH_SUCCESS, FETCH_LOADING, FETCH_ERROR, GET_FAVS_FROM_LS, fetchAnother, CLEAR_LS } from \"./actions\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nconst initial = {\n  favs: [],\n  current: null,\n  error: null,\n  loading: true\n};\nfunction writeFavsToLocalStorage(state) {\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\n}\nfunction clearLocalStorage() {\n  localStorage.removeItem(\"s10g4\");\n}\nfunction readFavsFromLocalStorage() {\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\n}\nexport function myReducer(state = initial, action) {\n  switch (action.type) {\n    case FAV_ADD:\n      const oldFav = state.favs.find(item => item.id === action.payload.id);\n      if (oldFav) {\n        toast.warn(\"Daha önce eklendi.\");\n        return state;\n      } else {\n        toast.success(\"Başarıyla eklendi.\");\n        const addFavState = {\n          ...state,\n          favs: [...state.favs, action.payload]\n        };\n        writeFavsToLocalStorage(addFavState);\n        return addFavState;\n      }\n    case FAV_REMOVE:\n      const removedFavState = {\n        ...state,\n        favs: state.favs.filter(item => item.id !== action.payload)\n      };\n      writeFavsToLocalStorage(removedFavState);\n      toast.success(\"Başarıyla çıkarıldı.\");\n      return removedFavState;\n    case FETCH_SUCCESS:\n      return {\n        ...state,\n        current: action.payload,\n        error: null,\n        loading: false\n      };\n    case FETCH_LOADING:\n      return {\n        ...state,\n        current: null,\n        error: null,\n        loading: true\n      };\n    case FETCH_ERROR:\n      return {\n        ...state,\n        current: null,\n        error: action.payload,\n        loading: false\n      };\n    case GET_FAVS_FROM_LS:\n      const favFromLS = readFavsFromLocalStorage();\n      //return { ...state, favs: favFromLS ? favFromLS : [] };\n      toast.success(\"Heyyy Aldın.\");\n      return {\n        ...state,\n        favs: favFromLS !== null && favFromLS !== void 0 ? favFromLS : []\n      };\n    case CLEAR_LS:\n      clearLocalStorage();\n      toast.success(\"Tüm jokelar silindi.\");\n      return {\n        ...state,\n        favs: []\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["FAV_ADD","FAV_REMOVE","FETCH_SUCCESS","FETCH_LOADING","FETCH_ERROR","GET_FAVS_FROM_LS","fetchAnother","CLEAR_LS","toast","initial","favs","current","error","loading","writeFavsToLocalStorage","state","localStorage","setItem","JSON","stringify","clearLocalStorage","removeItem","readFavsFromLocalStorage","parse","getItem","myReducer","action","type","oldFav","find","item","id","payload","warn","success","addFavState","removedFavState","filter","favFromLS"],"sources":["C:/Users/deniz/fsweb-s10g4-thunk-and-apis/src/reducers.js"],"sourcesContent":["import {\r\n  FAV_ADD,\r\n  FAV_REMOVE,\r\n  FETCH_SUCCESS,\r\n  FETCH_LOADING,\r\n  FETCH_ERROR,\r\n  GET_FAVS_FROM_LS,\r\n  fetchAnother,\r\n  CLEAR_LS,\r\n} from \"./actions\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst initial = {\r\n  favs: [],\r\n  current: null,\r\n  error: null,\r\n  loading: true,\r\n};\r\n\r\nfunction writeFavsToLocalStorage(state) {\r\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\r\n}\r\n\r\nfunction clearLocalStorage() {\r\n  localStorage.removeItem(\"s10g4\");\r\n}\r\n\r\nfunction readFavsFromLocalStorage() {\r\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\r\n}\r\n\r\nexport function myReducer(state = initial, action) {\r\n  switch (action.type) {\r\n    case FAV_ADD:\r\n      const oldFav = state.favs.find((item) => item.id === action.payload.id);\r\n      if (oldFav) {\r\n        toast.warn(\"Daha önce eklendi.\");\r\n        return state;\r\n      } else {\r\n        toast.success(\"Başarıyla eklendi.\");\r\n        const addFavState = { ...state, favs: [...state.favs, action.payload] };\r\n        writeFavsToLocalStorage(addFavState);\r\n        return addFavState;\r\n      }\r\n\r\n    case FAV_REMOVE:\r\n      const removedFavState = {\r\n        ...state,\r\n        favs: state.favs.filter((item) => item.id !== action.payload),\r\n      };\r\n      writeFavsToLocalStorage(removedFavState);\r\n      toast.success(\"Başarıyla çıkarıldı.\");\r\n      return removedFavState;\r\n\r\n    case FETCH_SUCCESS:\r\n      return { ...state, current: action.payload, error: null, loading: false };\r\n\r\n    case FETCH_LOADING:\r\n      return { ...state, current: null, error: null, loading: true };\r\n\r\n    case FETCH_ERROR:\r\n      return { ...state, current: null, error: action.payload, loading: false };\r\n\r\n    case GET_FAVS_FROM_LS:\r\n      const favFromLS = readFavsFromLocalStorage();\r\n      //return { ...state, favs: favFromLS ? favFromLS : [] };\r\n      toast.success(\"Heyyy Aldın.\");\r\n      return { ...state, favs: favFromLS ?? [] };\r\n\r\n    case CLEAR_LS:\r\n      clearLocalStorage();\r\n      toast.success(\"Tüm jokelar silindi.\");\r\n      return { ...state, favs: [] };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}